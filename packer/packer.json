{
    "variables": {
        "gcloud_account_json": "../credentials.json",
        "gcloud_project_id"  : "{{env `GCLOUD_PROJECT_ID`}}",
        "family_name"       : "wordpress-on-lamp-img"
    },
    "builders": [
        {
            "type": "googlecompute",
            "account_file": "{{user `gcloud_account_json`}}",
            "project_id"  : "{{user `gcloud_project_id`}}",
            "ssh_username": "ubuntu",
            "source_image_family": "ubuntu-1604-tls",
            "image_family": "{{user `family_name`}}",
            "image_name": "wordpress-lamp-{{timestamp}}",
            "zone": "us-west1-b",
            "machine_type": "n1-standard-1",
            "disk_size" : "20",
            "on_host_maintenance" : "TERMINATE"
        }
    ],
    "provisioners": [
        {
            "type": "ansible",
            "playbook_file": "../ansible/main_playbook.yml"

        }
    ]
}